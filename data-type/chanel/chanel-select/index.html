<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>信道选择</title><link rel="preload" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" data-n-g=""/><link rel="preload" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" as="script"/></head><body><div id="__next"><nav class="navbar navbar-expand-lg navbar-light bg-light"><a href="/comparison-note/" class="navbar-brand">对比学习笔记</a><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="navbar-collapse collapse" id="basic-navbar-nav"><div class="mr-auto navbar-nav"><a href="/comparison-note/algorithm" data-rb-event-key="/algorithm" class="nav-link">数据结构和算法</a><a href="/comparison-note/basic-concept" data-rb-event-key="/basic-concept" class="nav-link">基础概念</a><a href="/comparison-note/data-type" data-rb-event-key="/data-type" class="nav-link">数据类型</a><a href="/comparison-note/special" data-rb-event-key="/special" class="nav-link">专题</a></div></div></nav><div style="padding-top:12px;padding-bottom:12px" class="container-fluid"><h1>信道选择</h1><div style="margin-bottom:12px"><div class="markdown-body"></div></div><div style="margin-bottom:12px" class="justify-content-md-center row"><div class="col-md-auto"><div role="toolbar" class="btn-toolbar"><div role="group" class="btn-group btn-group-sm btn-group-toggle"><label class="btn btn-secondary"><input type="checkbox" value="go" autoComplete="off"/>go</label></div></div></div></div><div class="card-group"></div></div><div style="text-align:center;padding:12px 0;font-size:14px">v<!-- -->0.1.0<!-- --> <a href="https://github.com/fishjar/comparison-note" title="访问github源码">github</a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"nav":{"name":"chanel-select","fullPath":"/data-type/chanel/chanel-select","asPath":"/data-type/chanel/chanel-select","id":"%2Fdata-type%2Fchanel%2Fchanel-select","parent":{"name":"chanel","fullPath":"/data-type/chanel","asPath":"/data-type/chanel","id":"%2Fdata-type%2Fchanel","readme":{"title":"信道","fullPath":"/data-type/chanel/README.md"}},"readme":{"title":"信道选择","fullPath":"/data-type/chanel/chanel-select/README.md"},"cards":[{"name":"go.md","baseName":"go","extName":".md","fullPath":"/data-type/chanel/chanel-select/go.md"}],"nodes":[]},"content":"","cards":[{"name":"go.md","baseName":"go","extName":".md","fullPath":"/data-type/chanel/chanel-select/go.md","content":"select 语句使一个 Go 程可以等待多个通信操作。\nselect 会阻塞到某个分支可以继续执行为止，这时就会执行该分支。\n当多个分支都准备好时会随机选择一个执行。\n\n```go\npackage main\nimport \"fmt\"\nfunc fibonacci(c, quit chan int) {\n  x, y := 0, 1\n  for {\n    select {\n      case c \u003c- x:\n        x, y = y, x+y\n      case \u003c-quit:\n        fmt.Println(\"quit\")\n        return\n    }\n  }\n}\nfunc main() {\n  c := make(chan int)\n  quit := make(chan int)\n  go func() {\n    for i := 0; i \u003c 10; i++ {\n      fmt.Println(\u003c-c)\n    }\n    quit \u003c- 0\n  }() // 立即执行函数\n  fibonacci(c, quit)\n}\n\n\n// 当 select 中的其它分支都没有准备好时，default 分支就会执行。\npackage main\nimport (\n  \"fmt\"\n  \"time\"\n)\nfunc main() {\n  tick := time.Tick(100 * time.Millisecond)\n  boom := time.After(500 * time.Millisecond)\n  for {\n    select {\n    case \u003c-tick:\n      fmt.Println(\"tick.\")\n    case \u003c-boom:\n      fmt.Println(\"BOOM!\")\n      return\n    default:\n      fmt.Println(\"    .\")\n      time.Sleep(50 * time.Millisecond)\n    }\n  }\n}\n\n\n// 练习：等价二叉查找树\n// 函数 tree.New(k) 用于构造一个随机结构的已排序二叉查找树，\n// 它保存了值 k, 2k, 3k, ..., 10k\npackage main\nimport (\n  \"fmt\"\n  \"sort\"\n  \"golang.org/x/tour/tree\"\n)\nfunc walk(t *tree.Tree, ch chan int) {\n  if t == nil {\n    return\n  }\n  walk(t.Left, ch)\n  ch \u003c- t.Value\n  walk(t.Right, ch)\n}\n// Walk 遍历 tree t 将所有的值从 tree 发送到 channel ch。\nfunc Walk(t *tree.Tree, ch chan int) {\n  walk(t, ch)\n  close(ch)\n}\n// Same 检测树 t1 和 t2 是否含有相同的值。\nfunc Same(t1, t2 *tree.Tree) bool {\n  ch1 := make(chan int)\n  ch2 := make(chan int)\n  a1 := make([]int, 0)\n  a2 := make([]int, 0)\n  go Walk(t1, ch1)\n  go Walk(t2, ch2)\n  for v := range ch1 {\n    a1 = append(a1, v)\n  }\n  for v := range ch2 {\n    a2 = append(a2, v)\n  }\n  if len(a1) != len(a2) {\n    return false\n  }\n  // 是否应当Sort？\n  // 题目要求的是：检测 t1 和 t2 是否存储了相同的值\n  sort.Ints(a1)\n  sort.Ints(a2)\n  for i, v := range a1 {\n    if v != a2[i] {\n      return false\n    }\n  }\n  return true\n}\nfunc main() {\n  // Test Walk\n  ch := make(chan int)\n  t := tree.New(1)\n  fmt.Println(\"tree:\", t)\n  go Walk(t, ch)\n  for v := range ch {\n    fmt.Println(\"Got value:\", v)\n  }\n  // Test Same\n  t2 := tree.New(1)\n\n  fmt.Println(\"Check same:\", Same(t, t2))\n}\n```\n"}]}},"page":"/[...param]","query":{"param":["data-type","chanel","chanel-select"]},"buildId":"S-jJrz2DKYE9I2Mqo2Xou","assetPrefix":"/comparison-note","nextExport":true,"isFallback":false,"gip":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"信道选择"}]]}</script><script nomodule="" src="/comparison-note/_next/static/chunks/polyfills-7258ef49cf482e03ae9c.js"></script><script src="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" async=""></script><script src="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" async=""></script><script src="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" async=""></script><script src="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" async=""></script><script src="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" async=""></script><script src="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_buildManifest.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_ssgManifest.js" async=""></script></body></html>