<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>模式和匹配</title><link rel="preload" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" data-n-g=""/><link rel="preload" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" as="script"/></head><body><div id="__next"><nav class="navbar navbar-expand-lg navbar-light bg-light"><a href="/comparison-note/" class="navbar-brand">对比学习笔记</a><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="navbar-collapse collapse" id="basic-navbar-nav"><div class="mr-auto navbar-nav"><a href="/comparison-note/algorithm" data-rb-event-key="/algorithm" class="nav-link">数据结构和算法</a><a href="/comparison-note/basic-concept" data-rb-event-key="/basic-concept" class="nav-link">基础概念</a><a href="/comparison-note/data-type" data-rb-event-key="/data-type" class="nav-link">数据类型</a><a href="/comparison-note/special" data-rb-event-key="/special" class="nav-link">专题</a></div></div></nav><div style="padding-top:12px;padding-bottom:12px" class="container-fluid"><h1>模式和匹配</h1><div style="margin-bottom:12px"><div class="markdown-body"></div></div><div style="margin-bottom:12px" class="justify-content-md-center row"><div class="col-md-auto"><div role="toolbar" class="btn-toolbar"><div role="group" class="btn-group btn-group-sm btn-group-toggle"><label class="btn btn-secondary"><input type="checkbox" value="rust" autoComplete="off"/>rust</label></div></div></div></div><div class="card-group"></div></div><div style="text-align:center;padding:12px 0;font-size:14px">v<!-- -->0.1.0<!-- --> <a href="https://github.com/fishjar/comparison-note" title="访问github源码">github</a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"nav":{"name":"patterns","fullPath":"/basic-concept/patterns","asPath":"/basic-concept/patterns","id":"%2Fbasic-concept%2Fpatterns","parent":{"name":"basic-concept","fullPath":"/basic-concept","asPath":"/basic-concept","id":"%2Fbasic-concept","readme":{"title":"基础概念","fullPath":"/basic-concept/README.md"}},"readme":{"title":"模式和匹配","fullPath":"/basic-concept/patterns/README.md"},"cards":[{"name":"rust.md","baseName":"rust","extName":".md","fullPath":"/basic-concept/patterns/rust.md"}],"nodes":[]},"content":"","cards":[{"name":"rust.md","baseName":"rust","extName":".md","fullPath":"/basic-concept/patterns/rust.md","content":"模式由如下一些内容组合而成：\n\n- 字面量\n- 解构的数组、枚举、结构体或者元组\n- 变量\n- 通配符\n- 占位符\n\n## 可能会用到模式的位置\n\n```rust\n// match 分支\nmatch VALUE {\n    PATTERN =\u003e EXPRESSION,\n    PATTERN =\u003e EXPRESSION,\n    PATTERN =\u003e EXPRESSION,\n}\n\n\n// if let 条件表达式\nlet favorite_color: Option\u003c\u0026str\u003e = None;\nlet is_tuesday = false;\nlet age: Result\u003cu8, _\u003e = \"34\".parse();\nif let Some(color) = favorite_color {\n    println!(\"Using your favorite color, {}, as the background\", color);\n} else if is_tuesday {\n    println!(\"Tuesday is green day!\");\n} else if let Ok(age) = age {\n    if age \u003e 30 {\n        println!(\"Using purple as the background color\");\n    } else {\n        println!(\"Using orange as the background color\");\n    }\n} else {\n    println!(\"Using blue as the background color\");\n}\n\n\n// while let 条件循环\nlet mut stack = Vec::new();\nstack.push(1);\nstack.push(2);\nstack.push(3);\nwhile let Some(top) = stack.pop() {\n    println!(\"{}\", top);\n}\n\n\n// for 循环\nlet v = vec!['a', 'b', 'c'];\nfor (index, value) in v.iter().enumerate() {\n    println!(\"{} is at index {}\", value, index);\n}\n\n\n// let 语句\nlet x = 5;\nlet (x, y, z) = (1, 2, 3);\n\n\n// 函数参数\nfn foo(x: i32) {\n    // 代码\n}\n\n// 函数参数\nfn print_coordinates(\u0026(x, y): \u0026(i32, i32)) {\n    println!(\"Current location: ({}, {})\", x, y);\n}\nfn main() {\n    let point = (3, 5);\n    print_coordinates(\u0026point);\n}\n```\n\n## 模式语法\n\n```rust\n// 匹配字面量\nlet x = 1;\nmatch x {\n    1 =\u003e println!(\"one\"),\n    2 =\u003e println!(\"two\"),\n    3 =\u003e println!(\"three\"),\n    _ =\u003e println!(\"anything\"),\n}\n\n\n// 匹配命名变量\nfn main() {\n    let x = Some(5);\n    let y = 10;\n    match x {\n        Some(50) =\u003e println!(\"Got 50\"),\n        Some(y) =\u003e println!(\"Matched, y = {:?}\", y),\n        _ =\u003e println!(\"Default case, x = {:?}\", x),\n    }\n    println!(\"at the end: x = {:?}, y = {:?}\", x, y);\n}\n\n\n// 多个模式\nlet x = 1;\nmatch x {\n    1 | 2 =\u003e println!(\"one or two\"),\n    3 =\u003e println!(\"three\"),\n    _ =\u003e println!(\"anything\"),\n}\n\n\n// 通过 ..= 匹配值的范围\nlet x = 5;\nmatch x {\n    1..=5 =\u003e println!(\"one through five\"),\n    _ =\u003e println!(\"something else\"),\n}\n\n\n// 解构并分解值\nstruct Point {\n    x: i32,\n    y: i32,\n}\nlet p = Point { x: 0, y: 7 };\nlet Point { x: a, y: b } = p;\nassert_eq!(0, a);\nassert_eq!(7, b);\n\n//  使用结构体字段简写来解构结构体字段\nstruct Point {\n    x: i32,\n    y: i32,\n}\nlet p = Point { x: 0, y: 7 };\nlet Point { x, y } = p;\nassert_eq!(0, x);\nassert_eq!(7, y);\n\n// 解构和匹配模式中的字面量\nlet p = Point { x: 0, y: 7 };\nmatch p {\n    Point { x, y: 0 } =\u003e println!(\"On the x axis at {}\", x),\n    Point { x: 0, y } =\u003e println!(\"On the y axis at {}\", y),\n    Point { x, y } =\u003e println!(\"On neither axis: ({}, {})\", x, y),\n}\n\n\n// 解构枚举\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\nlet msg = Message::ChangeColor(0, 160, 255);\nmatch msg {\n    Message::Quit =\u003e {\n        println!(\"The Quit variant has no data to destructure.\")\n    }\n    Message::Move { x, y } =\u003e {\n        println!(\n            \"Move in the x direction {} and in the y direction {}\",\n            x,\n            y\n        );\n    }\n    Message::Write(text) =\u003e println!(\"Text message: {}\", text),\n    Message::ChangeColor(r, g, b) =\u003e {\n        println!(\n            \"Change the color to red {}, green {}, and blue {}\",\n            r,\n            g,\n            b\n        )\n    }\n}\n\n\n// 解构嵌套的结构体和枚举\nenum Color {\n   Rgb(i32, i32, i32),\n   Hsv(i32, i32, i32),\n}\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(Color),\n}\nfn main() {\n    let msg = Message::ChangeColor(Color::Hsv(0, 160, 255));\n    match msg {\n        Message::ChangeColor(Color::Rgb(r, g, b)) =\u003e {\n            println!(\n                \"Change the color to red {}, green {}, and blue {}\",\n                r,\n                g,\n                b\n            )\n        }\n        Message::ChangeColor(Color::Hsv(h, s, v)) =\u003e {\n            println!(\n                \"Change the color to hue {}, saturation {}, and value {}\",\n                h,\n                s,\n                v\n            )\n        }\n        _ =\u003e ()\n    }\n}\n\n\n// 解构结构体和元组\nlet ((feet, inches), Point {x, y}) = ((3, 10), Point { x: 3, y: -10 });\n\n\n// 使用 _ 忽略整个值\nfn foo(_: i32, y: i32) {\n    println!(\"This code only uses the y parameter: {}\", y);\n}\nfoo(3, 4);\n\n\n// 使用嵌套的 _ 忽略部分值\nlet mut setting_value = Some(5);\nlet new_setting_value = Some(10);\nmatch (setting_value, new_setting_value) {\n    (Some(_), Some(_)) =\u003e {\n        println!(\"Can't overwrite an existing customized value\");\n    }\n    _ =\u003e {\n        setting_value = new_setting_value;\n    }\n}\nprintln!(\"setting is {:?}\", setting_value);\n\n// 忽略元组的多个部分\nlet numbers = (2, 4, 8, 16, 32);\nmatch numbers {\n    (first, _, third, _, fifth) =\u003e {\n        println!(\"Some numbers: {}, {}, {}\", first, third, fifth)\n    },\n}\n\n\n// 只使用 _ 和使用以下划线开头的名称有些微妙的不同：\n// 比如 _x 仍会将值绑定到变量，\nlet s = Some(String::from(\"Hello!\"));\nif let Some(_s) = s {\n    println!(\"found a string\");\n}\nprintln!(\"{:?}\", s); // 错误\n\n// 而 _ 则完全不会绑定。\nlet s = Some(String::from(\"Hello!\"));\nif let Some(_) = s {\n    println!(\"found a string\");\n}\nprintln!(\"{:?}\", s);\n\n\n// 用 .. 忽略剩余值\nstruct Point {\n    x: i32,\n    y: i32,\n    z: i32,\n}\nlet origin = Point { x: 0, y: 0, z: 0 };\nmatch origin {\n    Point { x, .. } =\u003e println!(\"x is {}\", x),\n}\n\n// 只匹配元组中的第一个和最后一个值并忽略掉所有其它值\nlet numbers = (2, 4, 8, 16, 32);\nmatch numbers {\n    (first, .., last) =\u003e {\n        println!(\"Some numbers: {}, {}\", first, last);\n    },\n}\n\n\n// 匹配守卫提供的额外条件\n// 匹配守卫（match guard）是一个指定于 match 分支模式之后的额外 if 条件\nlet num = Some(4);\nmatch num {\n    Some(x) if x \u003c 5 =\u003e println!(\"less than five: {}\", x),\n    Some(x) =\u003e println!(\"{}\", x),\n    None =\u003e (),\n}\n\n// 使用匹配守卫来测试与外部变量的相等性\nlet x = Some(5);\nlet y = 10;\nmatch x {\n    Some(50) =\u003e println!(\"Got 50\"),\n    Some(n) if n == y =\u003e println!(\"Matched, n = {}\", n),\n    _ =\u003e println!(\"Default case, x = {:?}\", x),\n}\nprintln!(\"at the end: x = {:?}, y = {}\", x, y);\n\n// 结合多个模式与匹配守卫\nlet x = 4;\nlet y = false;\nmatch x {\n    4 | 5 | 6 if y =\u003e println!(\"yes\"),\n    _ =\u003e println!(\"no\"),\n}\n\n\n// @ 绑定\n// at 运算符（@）允许我们在创建一个存放值的变量的同时测试其值是否匹配模式。\nenum Message {\n    Hello { id: i32 },\n}\nlet msg = Message::Hello { id: 5 };\nmatch msg {\n    // 测试 Message::Hello 的 id 字段是否位于 3..=7 范围内，\n    // 同时也希望能将其值绑定到 id_variable 变量中\n    Message::Hello { id: id_variable @ 3..=7 } =\u003e {\n        println!(\"Found an id in range: {}\", id_variable)\n    },\n    // 这个模式的代码并不知情也不能使用 id 字段中的值，\n    // 因为没有将 id 值保存进一个变量。\n    Message::Hello { id: 10..=12 } =\u003e {\n        println!(\"Found an id in another range\")\n    },\n    Message::Hello { id } =\u003e {\n        println!(\"Found some other id: {}\", id)\n    },\n}\n```\n"}]}},"page":"/[...param]","query":{"param":["basic-concept","patterns"]},"buildId":"S-jJrz2DKYE9I2Mqo2Xou","assetPrefix":"/comparison-note","nextExport":true,"isFallback":false,"gip":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"模式和匹配"}]]}</script><script nomodule="" src="/comparison-note/_next/static/chunks/polyfills-7258ef49cf482e03ae9c.js"></script><script src="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" async=""></script><script src="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" async=""></script><script src="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" async=""></script><script src="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" async=""></script><script src="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" async=""></script><script src="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_buildManifest.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_ssgManifest.js" async=""></script></body></html>