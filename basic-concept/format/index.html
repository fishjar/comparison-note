<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>格式化</title><link rel="preload" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/dc4eece8d63e31b4b040.css" data-n-g=""/><link rel="preload" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" as="style"/><link rel="stylesheet" href="/comparison-note/_next/static/css/05437c60348a21355b6c.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" as="script"/><link rel="preload" href="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" as="script"/></head><body><div id="__next"><nav class="navbar navbar-expand-lg navbar-light bg-light"><a href="/comparison-note/" class="navbar-brand">对比学习笔记</a><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="navbar-collapse collapse" id="basic-navbar-nav"><div class="mr-auto navbar-nav"><a href="/comparison-note/algorithm" data-rb-event-key="/algorithm" class="nav-link">数据结构和算法</a><a href="/comparison-note/basic-concept" data-rb-event-key="/basic-concept" class="nav-link">基础概念</a><a href="/comparison-note/data-type" data-rb-event-key="/data-type" class="nav-link">数据类型</a><a href="/comparison-note/special" data-rb-event-key="/special" class="nav-link">专题</a></div></div></nav><div style="padding-top:12px;padding-bottom:12px" class="container-fluid"><h1>格式化</h1><div style="margin-bottom:12px"><div class="markdown-body"></div></div><div style="margin-bottom:12px" class="justify-content-md-center row"><div class="col-md-auto"><div role="toolbar" class="btn-toolbar"><div role="group" class="btn-group btn-group-sm btn-group-toggle"><label class="btn btn-secondary"><input type="checkbox" value="dart" autoComplete="off"/>dart</label><label class="btn btn-secondary"><input type="checkbox" value="go" autoComplete="off"/>go</label><label class="btn btn-secondary"><input type="checkbox" value="rust" autoComplete="off"/>rust</label></div></div></div></div><div class="card-group"></div></div><div style="text-align:center;padding:12px 0;font-size:14px">v<!-- -->0.1.0<!-- --> <a href="https://github.com/fishjar/comparison-note" title="访问github源码">github</a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"nav":{"name":"format","fullPath":"/basic-concept/format","asPath":"/basic-concept/format","id":"%2Fbasic-concept%2Fformat","parent":{"name":"basic-concept","fullPath":"/basic-concept","asPath":"/basic-concept","id":"%2Fbasic-concept","readme":{"title":"基础概念","fullPath":"/basic-concept/README.md"}},"readme":{"title":"格式化","fullPath":"/basic-concept/format/README.md"},"cards":[{"name":"dart.md","baseName":"dart","extName":".md","fullPath":"/basic-concept/format/dart.md"},{"name":"go.md","baseName":"go","extName":".md","fullPath":"/basic-concept/format/go.md"},{"name":"rust.md","baseName":"rust","extName":".md","fullPath":"/basic-concept/format/rust.md"}],"nodes":[]},"content":"","cards":[{"name":"dart.md","baseName":"dart","extName":".md","fullPath":"/basic-concept/format/dart.md","content":"```sh\npub global activate dart_style\ndartfmt test.dart\n```\n"},{"name":"go.md","baseName":"go","extName":".md","fullPath":"/basic-concept/format/go.md","content":"```sh\ngo fmt \u003c文件名\u003e.go\n# go fmt是gofmt的上层一个包装的命令\ngofmt\n```\n"},{"name":"rust.md","baseName":"rust","extName":".md","fullPath":"/basic-concept/format/rust.md","content":"```rust\n// 位置参数\nprintln!(\"{0}, this is {1}. {1}, this is {0}\", \"Alice\", \"Bob\");\nprintln!(\"{} of {:b} people know binary, the other half don't\", 1, 2);\n// Alice, this is Bob. Bob, this is Alice\n// 1 of 10 people know binary, the other half don't\n\n\n// 命名参数\nformat!(\"{argument}\", argument = \"test\");   // =\u003e \"test\"\nformat!(\"{name} {}\", 1, name = 2);          // =\u003e \"2 1\"\nformat!(\"{a} {c} {b}\", a=\"a\", b='b', c=3);  // =\u003e \"a 3 b\"\n\nlet argument = 2 + 2;\nformat!(\"{argument}\");   // =\u003e \"4\"\n\n// 精度\nprintln!(\"{:.3}\", 3.141592);\n```\n\n- 所有类型都能推导（derive，即自 动创建）`fmt::Debug` 的实现。\n  - 使用 `{:?}` 打印\n- 但是 `fmt::Display` 需要手动实现。\n  - 采用 `{}` 标记\n\n```rust\nuse std::fmt; // 导入 `fmt`\n\n// 带有两个数字的结构体。推导出 `Debug`，以便与 `Display` 的输出进行比较。\n#[derive(Debug)]\nstruct MinMax(i64, i64);\n\n// 实现 `MinMax` 的 `Display`。\nimpl fmt::Display for MinMax {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        // 使用 `self.number` 来表示各个数据。\n        write!(f, \"({}, {})\", self.0, self.1)\n    }\n}\n\n// 为了比较，定义一个含有具名字段的结构体。\n#[derive(Debug)]\nstruct Point2D {\n    x: f64,\n    y: f64,\n}\n\n// 类似地对 `Point2D` 实现 `Display`\nimpl fmt::Display for Point2D {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        // 自定义格式，使得仅显示 `x` 和 `y` 的值。\n        write!(f, \"x: {}, y: {}\", self.x, self.y)\n    }\n}\n\nfn main() {\n    let minmax = MinMax(0, 14);\n\n    println!(\"Compare structures:\");\n    println!(\"Display: {}\", minmax);\n    println!(\"Debug: {:?}\", minmax);\n\n    let big_range =   MinMax(-300, 300);\n    let small_range = MinMax(-3, 3);\n\n    println!(\"The big range is {big} and the small is {small}\",\n             small = small_range,\n             big = big_range);\n\n    let point = Point2D { x: 3.3, y: 7.2 };\n\n    println!(\"Compare points:\");\n    println!(\"Display: {}\", point);\n    println!(\"Debug: {:?}\", point);\n\n    // 报错。`Debug` 和 `Display` 都被实现了，但 `{:b}` 需要 `fmt::Binary`\n    // 得到实现。这语句不能运行。\n    // println!(\"What does Point2D look like in binary: {:b}?\", point);\n}\n```\n\n- 在 `write!` 上使用 `?`\n- `write!` 和 `format!` 类似，但它会将格式化后的字符串写入一个缓冲区（即第一个参数f）中。\n\n```rust\nuse std::fmt; // 导入 `fmt` 模块。\n\n// 定义一个包含单个 `Vec` 的结构体 `List`。\nstruct List(Vec\u003ci32\u003e);\n\nimpl fmt::Display for List {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        // 使用元组的下标获取值，并创建一个 `vec` 的引用。\n        let vec = \u0026self.0;\n\n        write!(f, \"[\")?;\n\n        // 使用 `v` 对 `vec` 进行迭代，并用 `count` 记录迭代次数。\n        for (count, v) in vec.iter().enumerate() {\n            // 对每个元素（第一个元素除外）加上逗号。\n            // 使用 `?` 或 `try!` 来返回错误。\n            if count != 0 { write!(f, \", \")?; }\n            write!(f, \"{}\", v)?;\n        }\n\n        // 加上配对中括号，并返回一个 fmt::Result 值。\n        write!(f, \"]\")\n    }\n}\n\nfn main() {\n    let v = List(vec![1, 2, 3]);\n    println!(\"{}\", v);\n}\n```\n"}]}},"page":"/[...param]","query":{"param":["basic-concept","format"]},"buildId":"S-jJrz2DKYE9I2Mqo2Xou","assetPrefix":"/comparison-note","nextExport":true,"isFallback":false,"gip":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"格式化"}]]}</script><script nomodule="" src="/comparison-note/_next/static/chunks/polyfills-7258ef49cf482e03ae9c.js"></script><script src="/comparison-note/_next/static/chunks/main-14614ae8e939b9e5961e.js" async=""></script><script src="/comparison-note/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/comparison-note/_next/static/chunks/framework.c7b20b4e446c7cca89e7.js" async=""></script><script src="/comparison-note/_next/static/chunks/7945cc82.ff5578978733a40a67a3.js" async=""></script><script src="/comparison-note/_next/static/chunks/commons.a32a113e095d8f0b1079.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/_app-1832d2b05f1f19d6a06d.js" async=""></script><script src="/comparison-note/_next/static/chunks/a1bc03cf.64f9f8493143216945e6.js" async=""></script><script src="/comparison-note/_next/static/chunks/4d6c67b811e74d3ca6630b1db854b02fef4ff3ce.8a4303f940dd12850a8f.js" async=""></script><script src="/comparison-note/_next/static/chunks/pages/%5B...param%5D-ec17b069b047a5ce78c3.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_buildManifest.js" async=""></script><script src="/comparison-note/_next/static/S-jJrz2DKYE9I2Mqo2Xou/_ssgManifest.js" async=""></script></body></html>